<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart City Dushanbe</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        :root {
            --bg-color: #f8f9fa;
            --card-bg-color: #fff;
            --text-color: #333;
            --text-muted-color: #555;
            --border-color: #e0e0e0;
            --header-bg-color: #fff;
            --button-bg-color: #003580;
            --button-hover-bg-color: #0056b3;
        }

        body.dark-mode {
            --bg-color: #121212;
            --card-bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --text-muted-color: #a0a0a0;
            --border-color: #333;
            --header-bg-color: #1e1e1e;
            --button-bg-color: #0056b3;
            --button-hover-bg-color: #007bff;
        }

        * {
            margin: 0;
            padding: 0; 
            box-sizing: border-box;
        }

        html, body {
            overflow-x: hidden;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        /* Preloader Styles */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 14px;
            z-index: 9999;
            opacity: 1;
            visibility: visible;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }

        .preloader-hidden {
            opacity: 0;
            visibility: hidden;
        }

        .preloader-inner {
            position: relative;
            width: 50px;
            height: 50px;
        }

        .preloader-ring {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid var(--button-bg-color);
            animation: pulse 2s ease-out infinite;
            opacity: 0;
        }

        .preloader-ring:nth-child(2) {
            animation-delay: -1s; /* Stagger the animation */
        }

        @keyframes pulse {
            0% {
                transform: scale(0.1);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }
        /* End Preloader Styles */

        /* Preloader Progress */
        .preloader-progress { width: 240px; }
        .preloader-progress-track {
            width: 100%;
            height: 8px;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 999px;
            overflow: hidden;
        }
        .preloader-progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #1E88E5, var(--button-bg-color));
            transition: width 0.25s ease;
        }
        .preloader-progress-text { margin-top: 8px; font-size: 12px; color: var(--text-muted-color); text-align: center; }
        .preloader-percent { color: var(--text-color); font-weight: 700; }
        @media (prefers-reduced-motion: reduce) { .preloader-progress-bar { transition: none; } }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            background: var(--header-bg-color);
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s, border-color 0.3s;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo-text { font-weight: bold; line-height: 1.2; }
        .logo-text .title { font-size: 16px; letter-spacing: 1px; }
        .logo-text .subtitle { font-size: 14px; color: var(--text-muted-color); }

        .header-right { display: flex; align-items: center; gap: 20px; }
        .lang-selector { display: flex; gap: 15px; font-size: 13px; color: var(--text-muted-color); }
        .lang-selector .active { color: var(--text-color); font-weight: bold; }
        .font-sizer { font-weight: bold; font-size: 16px; }
        .header-social { display: flex; gap: 10px; }
        .header-social a { color: var(--text-muted-color); font-size: 18px; transition: color 0.2s; }
        .header-social a:hover { color: #007bff; }
        .search-bar { display: flex; align-items: center; background: var(--bg-color); border-radius: 20px; padding: 6px 12px; }
        .search-bar input { border: none; background: none; outline: none; width: 150px; color: var(--text-color); }
        .search-bar button { border: none; background: none; cursor: pointer; color: var(--text-muted-color); }

        #theme-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 20px;
            padding: 5px;
        }
        #theme-toggle .fa-sun { display: none; }
        body.dark-mode #theme-toggle .fa-sun { display: inline-block; }
        body.dark-mode #theme-toggle .fa-moon { display: none; }

        .nav { background: var(--header-bg-color); transition: background-color 0.3s; }
        .nav-content { display: flex; justify-content: flex-start; gap: 40px; }
        .nav a { text-decoration: none; color: var(--text-color); padding: 15px 5px; display: block; font-size: 16px; font-weight: 500; border-bottom: 3px solid transparent; transition: color 0.2s, border-color 0.2s; }
        .nav a:hover { color: #007bff; }
        body:not(.dark-mode) .nav a.active { color: #000; border-bottom: 3px solid #d10000; }
        body.dark-mode .nav a.active { color: #fff; border-bottom: 3px solid #ff4d4d; }


        .main-section { padding: 30px 0; }
        .card { background: var(--card-bg-color); border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08); display: flex; flex-direction: column; transition: background-color 0.3s; }
        .placeholder-img { background-color: black; height: 200px;}
        .btn { background: var(--button-bg-color); color: #fff; padding: 12px 30px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; text-transform: uppercase; font-weight: 500; transition: background 0.2s; }
        .btn:hover { background: var(--button-hover-bg-color); }
        .hero-section { display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 20px; margin-bottom: 30px; }
        .decree-card .placeholder-img { height: 160px; }
        .decree-content { text-align: center; flex-grow: 1; display: flex; flex-direction: column; align-items: center; gap: 16px;}
        .decree-content img{margin-top: 50px;}
        .decree-title { order: 2; font-size: 14px; text-transform: uppercase; font-weight: bold; margin-top: 0; line-height: 1.4; word-break: break-word; hyphens: auto; }
        .decree-content .btn { order: 3; }
        .main-card { position: relative; }
        .main-card .placeholder-img { height: 280px; }
        .date-badge { position: absolute; top: 20px; right: 20px; background: rgba(255, 255, 255, 0.9); padding: 5px 10px; border-radius: 4px; font-size: 13px; font-weight: 500; color: #333; }
        body.dark-mode .date-badge { background: rgba(0, 0, 0, 0.7); color: #fff; }
        .main-content { padding: 25px; }
        .main-content h2 { font-size: 20px; margin-bottom: 15px; line-height: 1.4; }
        .main-content p { font-size: 14px; line-height: 1.6; margin-bottom: 20px; color: var(--text-muted-color); }
        .news-weather-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 40px; }
        .news-card { display: flex; gap: 20px; padding: 20px; flex-direction: row; align-items: center; }
        .news-card .placeholder-img { width: 100px; height: 80px; flex-shrink: 0; border-radius: 6px; }
        .news-content h3 { font-size: 15px; margin-bottom: 8px; line-height: 1.3; }
        .news-content p { font-size: 13px; color: var(--text-muted-color); line-height: 1.5; margin-bottom: 10px; }
        .news-date { font-size: 12px; color: #999; border-top: 1px solid var(--border-color); padding-top: 8px; margin-top: auto; }
        .services-section { display: flex; flex-direction: column; align-items: center; gap: 30px; margin-bottom: 40px; }
        .services-row { display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; }
        .service-item { text-align: center; transition: transform 0.2s; cursor: pointer; width: 120px; }
        .service-item:hover { transform: translateY(-5px); }
        .service-icon { width: 90px; height: 90px; margin: 0 auto 15px; background: var(--card-bg-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); color: #1E88E5; font-size: 36px; }
        .service-item p { font-size: 14px; font-weight: 500; line-height: 1.3; }
        .city-skyline { height: 350px; margin-bottom: 40px; display: flex; justify-content: center; background-repeat: no-repeat; background-position: bottom center; background-size: contain; }

        /* Partners slider (marquee) */
        .partners-slider { position: relative; overflow: hidden; width: 100%; padding: 10px 0; margin: 0 auto 30px; }
        .partners-slider::before, .partners-slider::after {
            content: ""; position: absolute; top: 0; bottom: 0; width: 60px; pointer-events: none; z-index: 1;
            background: linear-gradient(to right, var(--bg-color), transparent);
        }
        .partners-slider::after { right: 0; transform: rotate(180deg); }
        .partners-slider::before { left: 0; }
        .partners-track {
            display: flex; align-items: center; gap: 40px; width: max-content;
            animation: marquee var(--marquee-duration, 22s) linear infinite;
        }
        .partners-slider:hover .partners-track { animation-play-state: paused; }
        .partner { flex: 0 0 auto; display: flex; align-items: center; justify-content: center; }
        .partner img {
            height: 80px; width: auto; display: block;
            filter: grayscale(0.15); opacity: 0.9; transition: transform 0.2s, filter 0.2s, opacity 0.2s;
            background: var(--card-bg-color); border-radius: 8px; box-shadow: 0 4px 14px rgba(0,0,0,0.06);
        }
        .partner img:hover { transform: translateY(-3px); filter: none; opacity: 1; }
        @keyframes marquee { from { transform: translateX(0); } to { transform: translateX(-50%); } }
        @media (prefers-reduced-motion: reduce) { .partners-track { animation: none; } }

        /* Dark mode: make skyline and logos white */
        body.dark-mode .city-skyline img,
        body.dark-mode .logo-img img,
        body.dark-mode .footer-logo img {
            filter: brightness(0) invert(1);
            transition: filter 0.3s ease;
        }
        .footer { background: var(--header-bg-color); padding: 40px 0; border-top: 1px solid var(--border-color); transition: background-color 0.3s, border-color 0.3s; }
        .footer-content { display: grid; grid-template-columns: auto 1fr auto; gap: 40px; align-items: start; }
        .footer-logo-section { display: flex; flex-direction: column; align-items: center; }
        .footer-brand { text-align: center; font-weight: bold; font-size: 14px; line-height: 1.3; }
        .footer-contacts h3, .footer-social h3 { font-size: 18px; margin-bottom: 15px; }
        .footer-contacts p { font-size: 14px; line-height: 1.8; color: var(--text-muted-color); }
        .social-links { display: flex; gap: 10px; flex-wrap: wrap; }
        .social-link { width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 20px; text-decoration: none; transition: transform 0.2s, opacity 0.2s; }
        .social-link:hover { transform: scale(1.1); opacity: 0.9; }
        .social-link.telegram { background: #24A1DE; } .social-link.twitter { background: #1DA1F2; } .social-link.vk { background: #4680C2; } .social-link.facebook { background: #1877F2; } .social-link.linkedin { background: #0A66C2; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease; }
        .modal.show { display: flex; opacity: 1; }
        .modal-content { background-color: var(--card-bg-color); padding: 30px; border-radius: 8px; width: 90%; max-width: 800px; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3); max-height: 90vh; overflow-y: auto; }
        .close-button { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close-button:hover, .close-button:focus { color: var(--text-color); }
        #modal-image { width: 100%; height: auto; max-height: 400px; object-fit: cover; border-radius: 6px; margin-bottom: 20px; }
        #modal-title { margin-top: 0; margin-bottom: 15px; font-size: 24px; color: var(--text-color); }
        #modal-description { font-size: 16px; line-height: 1.7; color: var(--text-muted-color); }
        .article-trigger { cursor: pointer; }

        @media (max-width: 992px) {
            .container { padding: 0 16px; }
            .header-content { flex-direction: column; align-items: stretch; gap: 16px; }
            .header-right { width: 100%; justify-content: space-between; flex-wrap: wrap; gap: 16px; }
            .lang-selector { order: 1; }
            .search-bar { width: 100%; order: 5; }
            #theme-toggle { order: 4; }
            .header-social { order: 3; }
            .font-sizer { order: 2; }
            .nav-content { gap: 20px; flex-wrap: wrap; }
            .nav a { padding: 12px 0; }
            .hero-section { grid-template-columns: 1fr; }
            .main-card .placeholder-img { height: auto; }
            .news-weather-grid { grid-template-columns: 1fr; }
            .news-card { flex-direction: column; align-items: flex-start; }
            .news-card .placeholder-img { width: 100%; height: 160px; }
            .services-section { gap: 24px; }
            .service-item { width: 140px; }
            .footer-content { grid-template-columns: 1fr; gap: 32px; }
        }

        @media (max-width: 600px) {
            body { font-size: 15px; }
            .container { padding: 0 14px; }
            .header-content { gap: 12px; }
            .header-right { gap: 12px; }
            .lang-selector { width: 100%; justify-content: space-between; }
            .header-social { width: 100%; justify-content: center; }
            .nav-content { flex-wrap: nowrap; overflow-x: auto; gap: 12px; }
            .nav a { white-space: nowrap; padding: 10px 0; }
            .preloader-progress { width: 180px; }
            .hero-section { gap: 16px; }
            .main-content { padding: 20px; }
            .decree-card .placeholder-img { height: auto; }
            .decree-content { padding: 16px; gap: 12px; }
            .decree-title { font-size: 13px; }
            .decree-title img {margin-bottom: 100px;}
            .news-card { padding: 16px; }
            .services-row { gap: 16px; }
            .service-item { width: 45%; }
            .service-icon { width: 80px; height: 80px; font-size: 30px; }
            .city-skyline { height: 220px; margin-bottom: 32px; }
            .partners-slider { margin-bottom: 40px; }
            .partners-slider::before,
            .partners-slider::after { width: 30px; }
            .footer { padding: 30px 0; }
            .footer-content { gap: 24px; text-align: center; }
            .footer-contacts p { text-align: center; }
            .footer-social .social-links { justify-content: center; }
        }
    </style>
</head>
<body>
    <!-- Preloader HTML -->
    <div class="preloader" aria-live="polite" aria-busy="true">
        <div class="preloader-inner">
            <div class="preloader-ring"></div>
            <div class="preloader-ring"></div>
        </div>
        <div class="preloader-progress" aria-label="Загрузка">
            <div class="preloader-progress-track"><div class="preloader-progress-bar"></div></div>
            <div class="preloader-progress-text"><span class="preloader-percent">0%</span> Загрузка...</div>
        </div>
    </div>

    <header class="header">
        <div class="container header-content">
            <div class="logo">
                <div class="logo-img">
                    <img src="./assets/big_logo.png" alt="Logo of smart-city" loading="lazy" width="220" height="70">
                </div>
            </div>
            <div class="header-right">
                <div class="lang-selector">
                    <span>Точики</span>
                    <span class="active">Русский</span>
                    <span>English</span>
                </div>
                <div class="font-sizer">A A</div>
                <div class="header-social">
                    <a href="#" title="VK"><i class="fa-brands fa-vk"></i></a>
                    <a href="#" title="LinkedIn"><i class="fa-brands fa-linkedin-in"></i></a>
                    <a href="#" title="Twitter"><i class="fa-brands fa-twitter"></i></a>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="">
                    <button type="submit"><i class="fa fa-search"></i></button>
                </div>
                <button id="theme-toggle" title="Toggle theme">
                    <i class="fas fa-moon"></i>
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </div>
    </header>

    <nav class="nav">
        <div class="container nav-content">
            <a href="#" class="active">Асосӣ</a>
            <a href="#">Дар бораи мо</a>
            <a href="#">Шаҳри ҳушманд</a>
            <a href="#">Ахбор</a>
            <a href="#">Қарорҳо</a>
            <a href="#">Шарҳҳо ва хоҳишҳо</a>
        </div>
    </nav>

    <main class="main-section container">
        <section class="hero-section">
            <div class="decree-card card article-trigger"
                 data-title="Қарори Раиси шаҳри Душанбе"
                 data-image-src="assets/logo-smart-city.png"
                 data-description="Ин қарор ба беҳтар кардани инфрасохтори шаҳр ва ҷорӣ кардани стандартҳои нав дар сохтмон дахл дорад. Диққати асосӣ ба рушди 'минтақаҳои оқил', баланд бардоштани самаранокии энергетикии биноҳо ва фароҳам овардани муҳити бароҳаттар ва бехатар барои Сокинони Душанбе равона карда шудааст.">
                <div class="placeholder-img">
                    <img src="./assets/presidentEmomaliRahmon.jpg" alt="President of Tajikistan Emomali Rahmon" loading="lazy" width="100%" height="">
                </div>
                <div class="decree-content">
                    <img src="./assets/tjk.png" width="150" height="150">
                    <div class="decree-title">Қарори <br>Раиси шаҳри Душанбе</div>
                    <button class="btn">Муфассалтар</button>
                </div>
            </div>
            <div class="main-card card article-trigger"
                 data-title="Рӯзи Истиқлолияти Давлатии Ҷумҳурии Тоҷикистон муборак бод"
                 data-image-src="https://via.placeholder.com/800x400/A98963/FFFFFF?text=Independence+Day"
                 data-description="Истиқлолияти давлатӣ рамзи озодӣ, соҳибихтиерӣ ва шаъну шарафи миллӣ мебошад. Бо шарофати сиесати хирадмандона ва дурандешонаи Пешвои миллат Муҳтарам Эмомалӣ Раҳмон Тоҷикистони азизамон дар роҳи рушду шукуфоӣ ба комебиҳои назаррас ноил гардиданд. Ин рӯз як давраи нав дар таърихи миллат аст, ки пур аз дастовардҳо дар иқтисодиет, фарҳанг ва соҳаи иҷтимоӣ мебошад. Мо аз ҳамаи шаҳрвандон даъват менамоем, ки барои таҳкими минбаъдаи давлатамон муттаҳид шаванд.">
                <div class="placeholder-img">
                    <img src="./assets/9-сентябр-2025-2000x1200.jpg" alt="Independence day 9 of September" loading="lazy" width="100%" height="300">
                </div>
                <div class="date-badge">09-09-2025</div>
                <div class="main-content">
                    <h2>Рӯзи Истиқлолияти Давлатии Ҷумҳурии Тоҷикистон муборак бод</h2>
                    <p>Истиқлолияти давлатӣ рамзи озодӣ, соҳибихтиерӣ ва шаъну шарафи миллӣ мебошад...</p>
                    <button class="btn">Муфассалтар</button>
                </div>
            </div>
            <div class="decree-card card article-trigger"
                 data-title="Қарор дар бораи рақамисозии хадамоти шаҳрӣ"
                 data-image-src="https://via.placeholder.com/800x400/cccccc/000000?text=Decree+Image+2"
                 data-description="Қарори нав ба суръат бахшидан ба раванди рақамисозии хадамоти давлатӣ ва коммуналӣ нигаронида шудааст. Мақсад аз он иборат аст, ки ҳамкории шаҳрвандон бо ҳукумат то ҳадди имкон содда, зуд ва шаффоф бошад. Лоиҳа оғози портали ягонаи хидматрасонии шаҳрӣ, барномаи мобилӣ ва шабакаи марказҳои бисерфунксионалии насли навро дар бар мегирад.">
                <div class="placeholder-img">
                    <img src="./assets/MayorRustamiEmomali.jpg" alt="Mayor Tajikistan Rustami Emomali" loading="lazy" width="100%">
                </div>
                <div class="decree-content">
                    <div class="decree-title">Қарори<br>Раиси шаҳри Душанбе </div>
                    <img src="./assets/dushanbe.svg" width="150" height="150">
                    <button class="btn">Муфассалтар</button>
                </div>
            </div>
        </section>

        <section class="news-weather-grid">
            <div class="news-card card article-trigger"
                 data-title="Таджикистан и ОАЭ подписали соглашение о сотрудничестве в сфере ИИ"
                 data-image-src="https://via.placeholder.com/800x400/1E88E5/FFFFFF?text=AI+Partnership"
                 data-description="На международной выставке высоких технологий было подписано ключевое соглашение между Таджикистаном и Объединенными Арабскими Эмиратами. Документ предусматривает совместную работу над развитием технологий искусственного интеллекта, создание национального кластера вычислений и обмен опытом в области машинного обучения и анализа больших данных. Этот шаг, сделанный под патронажем президента Эмомали Рахмона, открывает новые горизонты для технологического развития страны.">
                <div class="placeholder-img"></div>
                <div class="news-content">
                    <h3>Тоҷикистон ва АМА созишномаи ҳамкорӣ дар СОҲАИ AI ро имзо карданд</h3>
                    <div class="news-date">2025-08-27</div>
                </div>
            </div>
            <div class="news-card card article-trigger"
                 data-title="Внедрение ИИ в систему городского управления"
                 data-image-src="https://via.placeholder.com/800x400/1E88E5/FFFFFF?text=AI+in+City"
                 data-description="В рамках программы 'Умный город' начинается пилотный проект по внедрению искусственного интеллекта в систему управления городским хозяйством. Технологии ИИ будут использоваться для оптимизации транспортных потоков, мониторинга экологической обстановки и прогнозирования нагрузки на коммунальные сети. Ожидается, что это позволит повысить эффективность работы городских служб и снизить затраты.">
                <div class="placeholder-img"></div>
                <div class="news-content">
                    <h3>Тоҷикистон ва АМА созишномаи ҳамкорӣ дар СОҲАИ AI ро имзо карданд</h3>
                    <div class="news-date">2025-08-27</div>
                </div>
            </div>
            <div class="news-card card article-trigger"
                 data-title="Образовательные программы по ИИ для молодежи"
                 data-image-src="https://via.placeholder.com/800x400/1E88E5/FFFFFF?text=AI+Education"
                 data-description="Министерство образования и науки объявляет о запуске серии бесплатных образовательных программ по искусственному интеллекту для студентов и старшеклассников. Курсы будут охватывать основы программирования, машинного обучения и анализа данных. Цель инициативы – подготовить новое поколение специалистов, способных работать с передовыми технологиями и вносить вклад в цифровую трансформацию Таджикистана.">
                <div class="placeholder-img"></div>
                <div class="news-content">
                    <h3>Тоҷикистон ва АМА созишномаи ҳамкорӣ дар СОҲАИ AI ро имзо карданд</h3>
                    <div class="news-date">2025-08-27</div>
                </div>
            </div>
            <div class="news-card card article-trigger"
                 data-title="Внедрение ИИ в систему городского управления"
                 data-image-src="https://via.placeholder.com/800x400/1E88E5/FFFFFF?text=AI+in+City"
                 data-description="В рамках программы 'Умный город' начинается пилотный проект по внедрению искусственного интеллекта в систему управления городским хозяйством. Технологии ИИ будут использоваться для оптимизации транспортных потоков, мониторинга экологической обстановки и прогнозирования нагрузки на коммунальные сети. Ожидается, что это позволит повысить эффективность работы городских служб и снизить затраты.">
                <div class="placeholder-img"></div>
                <div class="news-content">
                    <h3>Тоҷикистон ва АМА созишномаи ҳамкорӣ дар СОҲАИ AI ро имзо карданд</h3>
                    <div class="news-date">2025-08-27</div>
                </div>
            </div>
        </section>

        <section class="services-section">
            <div class="services-row">
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-car-side"></i></div><p>Нақлиети ҳушманд</p></div>
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-lightbulb"></i></div><p>Энергияи ҳушманд</p></div>
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-heart-pulse"></i></div><p>Тибби ҳушманд</p></div>
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-building-columns"></i></div><p>Ҳукумати ҳушманд</p></div>
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-house-signal"></i></div><p>Хонаи ҳушманд</p></div>
            </div>
            <div class="services-row">
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-hand-holding-dollar"></i></div><p>Иқтисоди ҳушманд</p></div>
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-shield-halved"></i></div><p>Амнияти ҳушманд</p></div>
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-seedling"></i></div><p>Экологияи ҳушманд</p></div>
                <div class="service-item"><div class="service-icon"><i class="fa-solid fa-brain"></i></div><p>Таълими ҳушманд</p></div>
            </div>
        </section>

        <div class="city-skyline">
            <img src="./assets/skyline.png" alt="Skyline" loading="lazy" width="1000" height="330">
        </div>
        <div class="partners-slider" aria-label="Партнеры" role="region">
            <div class="partners-track">
                <div class="partner"><img src="./assets/ИОГВ.jpg" alt="ИОГВ" width="280" height="80" loading="eager"></div>
                <div class="partner"><img src="./assets/khovar.png" alt="Ховар" width="280" height="80" loading="lazy"></div>
                <div class="partner"><img src="./assets/mvd.jpg" alt="МВД" width="280" height="80" loading="lazy"></div>
                <div class="partner"><img src="./assets/Barqi_tojik.jpg" alt="Барқи Тоҷик" width="280" height="80" loading="lazy"></div>
                <div class="partner" aria-hidden="true"><img src="./assets/ИОГВ.jpg" alt="" width="280" height="80" loading="lazy"></div>
                <div class="partner" aria-hidden="true"><img src="./assets/khovar.png" alt="" width="280" height="80" loading="lazy"></div>
                <div class="partner" aria-hidden="true"><img src="./assets/mvd.jpg" alt="" width="280" height="80" loading="lazy"></div>
                <div class="partner" aria-hidden="true"><img src="./assets/Barqi_tojik.jpg" alt="" width="280" height="80" loading="lazy"></div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-logo-section">
                <div class="footer-logo">
                    <img src="./assets/logo.png" alt="Logo of smart-city" loading="lazy" width="100" height="150">
                </div>
            </div>
            <div class="footer-contacts">
                <h3>Контакты</h3>
                <p>Мақомоти иҷроияи ҳокимияти давлатии Шаҳри Душанбе.<br>Корхонаи воҳиди давлатии "Шаҳри ҳушманд".<br>Суроға: Кӯчаи М.Курбонов 25.<br>Тел./Факс: +992 (37) 2274745, (+992) 987 32 20 20<br>Эл. почта: info@dsc.tj</p>
            </div>
            <div class="footer-social">
                <h3>Шабакаҳои иҷтимоӣ</h3>
                <div class="social-links">
                    <a href="#" class="social-link telegram" title="Telegram"><i class="fa-brands fa-telegram"></i></a>
                    <a href="#" class="social-link twitter" title="Twitter"><i class="fa-brands fa-twitter"></i></a>
                    <a href="#" class="social-link vk" title="VK"><i class="fa-brands fa-vk"></i></a>
                    <a href="#" class="social-link facebook" title="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="social-link linkedin" title="LinkedIn"><i class="fa-brands fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal HTML Structure -->
    <div id="article-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <img id="modal-image" src="" alt="Article Image">
            <h2 id="modal-title"></h2>
            <p id="modal-description"></p>
        </div>
    </div>

    <script>
        // --- Preloader Script (progress-based) ---
        const preloader = document.querySelector('.preloader');
        const progressBar = document.querySelector('.preloader-progress-bar');
        const percentText = document.querySelector('.preloader-percent');
        const assetsToTrack = Array.from(document.images).filter(img => !img.complete);
        let loaded = 0;
        let shownPercent = 0;

        function updateProgress(forcePercent) {
            const target = Math.min(100, forcePercent ?? Math.round((loaded / Math.max(1, assetsToTrack.length)) * 100));
            shownPercent = Math.max(shownPercent, target);
            progressBar.style.width = shownPercent + '%';
            percentText.textContent = shownPercent + '%';
        }

        const safetyStart = Date.now();
        const SAFETY_TIME = 4000; // ms
        const MIN_SHOW_TIME = 800; // ms to avoid flash

        assetsToTrack.forEach(img => {
            const onDone = () => { loaded++; updateProgress(); };
            img.addEventListener('load', onDone, { once: true });
            img.addEventListener('error', onDone, { once: true });
        });

        // Smoothly increase to 90% while waiting
        const tick = setInterval(() => {
            if (shownPercent < 90) updateProgress(shownPercent + 1);
        }, 120);

        function hidePreloader() {
            clearInterval(tick);
            updateProgress(100);
            const elapsed = Date.now() - safetyStart;
            const delay = Math.max(0, MIN_SHOW_TIME - elapsed);
            setTimeout(() => preloader.classList.add('preloader-hidden'), delay);
        }

        window.addEventListener('load', () => {
            // Ensure we don't wait forever
            hidePreloader();
        });

        setTimeout(() => {
            if (!preloader.classList.contains('preloader-hidden')) hidePreloader();
        }, SAFETY_TIME);

        document.addEventListener('DOMContentLoaded', function () {
            // --- Modal Script ---
            const modal = document.getElementById('article-modal');
            const modalImage = document.getElementById('modal-image');
            const modalTitle = document.getElementById('modal-title');
            const modalDescription = document.getElementById('modal-description');
            const closeButton = document.querySelector('.close-button');
            const articleTriggers = document.querySelectorAll('.article-trigger');

            const openModal = (title, description, imageSrc) => {
                modalTitle.textContent = title;
                modalDescription.textContent = description;
                modalImage.src = imageSrc;
                modal.classList.add('show');
            };

            const closeModal = () => {
                modal.classList.remove('show');
            };

            articleTriggers.forEach(trigger => {
                trigger.addEventListener('click', function () {
                    const title = this.dataset.title;
                    const description = this.dataset.description;
                    const imageSrc = this.dataset.imageSrc;
                    openModal(title, description, imageSrc);
                });
            });

            closeButton.addEventListener('click', closeModal);
            modal.addEventListener('click', (event) => {
                if (event.target === modal) closeModal();
            });
            window.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && modal.classList.contains('show')) closeModal();
            });

            // --- Theme Toggler Script ---
            const themeToggle = document.getElementById('theme-toggle');
            const currentTheme = localStorage.getItem('theme');

            if (currentTheme) {
                document.body.classList.add(currentTheme);
            }

            themeToggle.addEventListener('click', function () {
                document.body.classList.toggle('dark-mode');
                let theme = document.body.classList.contains('dark-mode') ? 'dark-mode' : '';
                localStorage.setItem('theme', theme);
            });

            // --- Partners marquee dynamic duration ---
            const slider = document.querySelector('.partners-slider');
            const track = slider?.querySelector('.partners-track');
            if (slider && track) {
                const setDuration = () => {
                    const totalWidth = track.scrollWidth / 2; // because duplicated
                    const speed = 120; // px per second
                    const duration = Math.max(12, Math.round(totalWidth / speed));
                    track.style.setProperty('--marquee-duration', duration + 's');
                };
                setDuration();
                window.addEventListener('resize', setDuration);
            }
        });
    </script>
</body>
</html>
